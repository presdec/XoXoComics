(()=>{"use strict";var t,e,a={d:(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},s={};a.r(s),a.d(s,{default:()=>l,sources:()=>n}),function(t){t.BLUE="blue",t.GREEN="green",t.GREY="grey",t.YELLOW="yellow",t.RED="red"}(t||(t={})),function(t){t[t.ONGOING=1]="ONGOING",t[t.COMPLETED=2]="COMPLETED",t[t.UNKNOWN=0]="UNKNOWN"}(e||(e={}));class i{constructor(t){this.sourceInfo=t}async requestModifier(t){return t}}const r=require("cheerio"),o="https://xoxocomic.com",c={version:"1.0.0",name:"XoXoComics",icon:"icon.png",author:"Private Extension",authorWebsite:"",description:"Extension for XoXoComics (Private Use Only)",websiteBaseURL:o,sourceTags:[{text:"Private",type:t.GREY}]},n=[new class extends i{constructor(){super(c)}async requestModifier(t){return t.headers={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","Accept-Language":"en-US,en;q=0.5","Accept-Encoding":"gzip, deflate",Connection:"keep-alive","Upgrade-Insecure-Requests":"1",Referer:o,...t.headers},t}async makeRequest(t){const e={url:t,method:"GET",headers:{}},a=await this.requestModifier(e);try{const t=await fetch(a.url,{method:a.method,headers:a.headers});return await t.text()}catch(e){throw console.error(`Failed to fetch ${t}:`,e),e}}async getMangaDetails(t){const a=`${o}/comic/${t}`,s=await this.makeRequest(a),i=r.load(s),c=i(".comic-title, .series-title, h1, h2").first().text().trim()||"Unknown Title",n=i(".comic-author, .author, .creator").first().text().trim()||"Unknown",l=i(".comic-artist, .artist").first().text().trim()||n,d=i(".comic-description, .description, .summary, .about").first().text().trim()||"",m=i('.comic-cover img, .lazyOwl, .lazy, img[alt*="cover"]').first();let u=m.attr("src")||m.attr("data-src")||"";u&&!u.startsWith("http")&&(u=`${o}${u}`);const h=i(".comic-status, .status").first().text().trim().toLowerCase();let g=e.UNKNOWN;return h.includes("ongoing")||h.includes("continuing")?g=e.ONGOING:(h.includes("completed")||h.includes("finished"))&&(g=e.COMPLETED),{id:t,titles:[c],image:u,status:g,author:n,artist:l,tags:i(".comic-tags .tag, .genres .genre, .tags .tag").map((t,e)=>({id:i(e).text().trim(),label:i(e).text().trim()})).get(),desc:d}}async getChapters(t){const e=`${o}/comic/${t}`,a=await this.makeRequest(e),s=r.load(a),i=[];return s('a[href*="/issue-"], a[href*="issue"], a:contains("Start Reading"), a:contains("Read"), a:contains("Chapter")').each((e,a)=>{const r=s(a),o=r.attr("href")||"",c=r.text().trim()||`Issue ${e+1}`,n=o.match(/\/issue-(\d+)|\/(\d+)$/),l=n?`issue-${n[1]||n[2]}`:`chapter-${e+1}`,d=c.match(/(?:issue|chapter|ch\.?|episode|ep\.?)\s*[#]?(\d+(?:\.\d+)?)/i)||o.match(/(?:issue|chapter)-(\d+)/),m=d?parseFloat(d[1]):e+1;o.includes("/comic/")&&o.includes("issue")&&i.push({id:l,mangaId:t,name:c,langCode:"en",chapNum:m,time:new Date})}),i.reverse()}async getChapterDetails(t,e){const a=`${o}/comic/${t}/${e}`,s=await this.makeRequest(a),i=r.load(s),c=[];if(i(".single-page.lazy, .single-page, .comic-page img, .reader-image img").each((t,e)=>{const a=i(e);let s=a.attr("src")||a.attr("data-src")||a.attr("data-lazy")||"";s&&(s.startsWith("http")||(s=`${o}${s}`),c.push(s))}),0===c.length){const t=i("script").text().match(/["'](https?:\/\/[^"']*\.(?:jpg|jpeg|png|gif|webp))["']/gi);t&&t.forEach(t=>{const e=t.replace(/["']/g,"");(e.includes("xoxocomic")||e.includes("comic")||e.includes("manga"))&&c.push(e)})}return{id:e,mangaId:t,pages:c}}async getSearchResults(t,a){const s=encodeURIComponent(t.title||""),i=a?.page||1,c=`${o}/search?keyword=${s}&page=${i}`,n=await this.makeRequest(c),l=r.load(n),d=[];return l(".lazyOwl").each((t,a)=>{const s=l(a),i=s.closest("a");if(i.length){const t=i.attr("href")||"",a=s.attr("alt")||i.attr("title")||"",r=s.attr("src")||s.attr("data-src")||"",c=t.split("/").filter(Boolean).pop()||"";c&&a&&t.includes("/comic/")&&!a.toLowerCase().includes("logo")&&d.push({id:c,titles:[a],image:r.startsWith("http")?r:`${o}${r}`,status:e.UNKNOWN})}}),{results:d,metadata:{page:i+1}}}async getHomePageSections(t){const a=await this.makeRequest(o),s=r.load(a),i=[];s(".lazyOwl").each((t,a)=>{const r=s(a),o=r.closest("a");if(o.length){const t=o.attr("href")||"",a=r.attr("alt")||"",s=r.attr("src")||"",c=t.split("/").filter(Boolean).pop()||"";c&&a&&t.includes("/comic/")&&!a.toLowerCase().includes("logo")&&i.push({id:c,titles:[a],image:s,status:e.UNKNOWN})}}),i.length>0&&t({id:"trending",title:"Trending Comics",items:i,view_more:!0});const c=[];s('.hot .item, [class*="hot"] .item, .Module .item').each((t,a)=>{const i=s(a),r=i.find("a").first(),n=r.attr("href")||"",l=r.attr("title")||i.find("img").attr("alt")||r.text().trim(),d=i.find("img").first();let m=d.attr("data-src")||d.attr("src")||"";!m||m.startsWith("http")||m.startsWith("data:")||(m=`${o}${m}`);const u=n.split("/").filter(Boolean).pop()||"";u&&l&&!l.toLowerCase().includes("logo")&&c.push({id:u,titles:[l],image:m,status:e.UNKNOWN})}),c.length>0&&t({id:"hot",title:"Hot Comics",items:c,view_more:!0})}async getViewMoreItems(t,a){const s=a?.page||1;let i="";switch(t){case"trending":i=`${o}/trending-comic?page=${s}`;break;case"hot":i=`${o}/hot-comic?page=${s}`;break;default:return{results:[],metadata:{page:1}}}const c=await this.makeRequest(i),n=r.load(c),l=[];return n('.item, .comic-item, .ModuleContent .col-sm-3, [class*="comic"]').each((t,a)=>{const s=n(a),i=s.find("a").first(),r=i.attr("href")||"",c=i.attr("title")||s.find("img").attr("alt")||i.text().trim(),d=s.find("img").first();let m=d.attr("data-src")||d.attr("src")||"";!m||m.startsWith("http")||m.startsWith("data:")||(m=`${o}${m}`);const u=r.split("/").filter(Boolean).pop()||"";u&&c&&!c.toLowerCase().includes("logo")&&l.push({id:u,titles:[c],image:m,status:e.UNKNOWN})}),{results:l,metadata:{page:s+1}}}}],l=n[0];module.exports=s})();
//# sourceMappingURL=bundle.js.map